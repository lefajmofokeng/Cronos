<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Service Cost Estimator</title>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* ============================================================
          CSS Resets & Base Styles (1px Border Radius enforced)
          ============================================================
        */
        :root {
            --color-primary: #0f172a; /* Slate-900 / Deep Charcoal */
            --color-secondary: #7d7d7d; /* Gray-300 / Light Gray */
            --color-accent: #f97316; /* Orange-500 */
            --color-bg-light: #fff; /* Slate-50 */
        }
        
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* Slate-100 */
            color: var(--color-primary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background-color: var(--color-bg-light);
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 1000px;
            width: 100%;
            display: flex;
            min-height: 80vh;
            overflow: hidden;
        }

        /* ============================================================
          Layout and Components
          ============================================================
        */

        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .summary {
            width: 350px;
            background-color: #e2e8f0; /* Slate-200 */
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .service-block {
            border: 1px solid #cbd5e1; /* Slate-300 */
            background-color: #fff;
            padding: 20px;
            border-radius: 6px; /* Slightly less rounded for blocks */
            margin-bottom: 20px;
            transition: all 0.2s ease-in-out;
        }

        .service-block:hover {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .service-header label {
            font-weight: 600;
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        
        /* Custom Checkbox Styling */
        .service-header input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--color-accent); /* Orange color */
            border-radius: 4px;
            cursor: pointer;
            margin-right: 15px;
        }
        
        /* Configuration Block */
        .config-block {
            padding-top: 15px;
            margin-top: 15px;
            border-top: 1px dashed #e2e8f0; /* Slate-200 */
            display: none; /* Hidden by default */
        }

        .config-block label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: #475569; /* Slate-600 */
        }
        
        .config-block input[type="number"],
        .config-block select {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .config-block input:focus,
        .config-block select:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2);
        }
        
        /* Summary Styling */
        .summary-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--color-secondary);
        }

        .summary h2 {
            font-weight: 800;
            color: var(--color-primary);
        }

        #total-cost {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--color-accent);
            display: block;
        }

        .btn-reset {
            background-color: #64748b; /* Slate-500 */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        .btn-reset:hover {
            background-color: #475569; /* Slate-600 */
        }

        /* Utility classes (using Tailwind-like syntax for easy reading) */
        .text-xl { font-size: 1.25rem; }
        .text-lg { font-size: 1.125rem; }
        .text-sm { font-size: 0.875rem; }
        .text-xs { font-size: 0.75rem; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .bg-orange-100 { background-color: #fff7ed; }
        .text-orange-600 { color: #ea580c; }
        .bg-sky-100 { background-color: #f0f9ff; }
        .text-sky-600 { color: #0284c7; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .py-0\.5 { padding-top: 0.125rem; padding-bottom: 0.125rem; }
        .rounded-full { border-radius: 9999px; }
        .ml-2 { margin-left: 0.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }

        @media (max-width: 800px) {
            .container {
                flex-direction: column;
                min-height: auto;
            }
            .summary {
                width: 100%;
                order: -1; /* Place summary on top for mobile */
            }
            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="main-content">
            <h1 class="text-2xl font-bold mb-6">Enterprise Service Cost Estimator</h1>
            <p class="mb-6 text-gray-600">Select the services your business needs and configure the specifications to get an estimated cost.</p>

            <form id="calculation-form">
                
                <!-- 1. Web Development -->
                <div id="web-development-block" class="service-block">
                    <div class="service-header">
                        <label for="web-development-check">
                            <input type="checkbox" id="web-development-check" name="service" value="web-development">
                            <h3 class="text-lg font-semibold text-gray-800">Web Development <span class="text-xs font-medium text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full ml-2">CAPEX</span></h3>
                        </label>
                        <span class="calculated-cost font-bold text-lg text-gray-800">R 0</span>
                    </div>

                    <!-- CONFIGURATION BLOCK -->
                    <div id="web-development-config" class="config-block mt-4 space-y-3">
                        <!-- Option 1: Development Type (Base Cost) -->
                        <div class="flex flex-col">
                            <label for="web-dev-type" class="text-sm font-medium text-gray-700 mb-1">Development Base Package</label>
                            <select id="web-dev-type" data-service-id="web-development" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                                <option value="15000" data-price="15000">Standard Single-Page/Brochure (R 15,000)</option>
                                <option value="35000" data-price="35000">Advanced E-commerce Setup (R 35,000)</option>
                                <option value="80000" data-price="80000">Custom Web Application (R 80,000)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Selects the core project fee (CAPEX).</p>
                        </div>

                        <!-- Option 2: Number of Extra Pages (Multiplier) -->
                        <div class="flex flex-col">
                            <label for="web-dev-pages" class="text-sm font-medium text-gray-700 mb-1">Number of Extra Pages (beyond base)</label>
                            <input type="number" id="web-dev-pages" data-service-id="web-development" data-base-price="3500" data-unit="page" value="2" min="0" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                            <p class="text-xs text-gray-500 mt-1">R 3,500 per additional content page.</p>
                        </div>
                    </div>
                </div>

                <!-- 2. IT Support -->
                <div id="it-support-block" class="service-block">
                    <div class="service-header">
                        <label for="it-support-check">
                            <input type="checkbox" id="it-support-check" name="service" value="it-support">
                            <h3 class="text-lg font-semibold text-gray-800">IT Support <span class="text-xs font-medium text-sky-600 bg-sky-100 px-2 py-0.5 rounded-full ml-2">OPEX</span></h3>
                        </label>
                        <span class="calculated-cost font-bold text-lg text-gray-800">R 0</span>
                    </div>

                    <!-- CONFIGURATION BLOCK -->
                    <div id="it-support-config" class="config-block mt-4 space-y-3">
                        <!-- Option 1: Support Type (Base Cost) -->
                        <div class="flex flex-col">
                            <label for="it-support-type" class="text-sm font-medium text-gray-700 mb-1">Support Model</label>
                            <select id="it-support-type" data-service-id="it-support" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                                <option value="5000" data-price="5000">Monthly Remote Retainer (R 5,000/mo)</option>
                                <option value="15000" data-price="15000">Proactive SLA (R 15,000/mo)</option>
                                <option value="1500" data-price="1500">Ad-hoc On-Site Visit (R 1,500/visit)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Selects the base monthly or per-visit fee (OPEX).</p>
                        </div>

                        <!-- Option 2: Remote Minutes (Multiplier) -->
                        <div class="flex flex-col">
                            <label for="it-support-minutes" class="text-sm font-medium text-gray-700 mb-1">Remote Support Time Blocks (30 min blocks)</label>
                            <input type="number" id="it-support-minutes" data-service-id="it-support" data-base-price="49" data-unit="30-min-block" value="4" min="0" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                            <p class="text-xs text-gray-500 mt-1">R 49 per 30 minutes for remote support (outside retainer). Value represents blocks of 30 minutes.</p>
                        </div>
                    </div>
                </div>

                <!-- 3. Cloud Hosting -->
                <div id="cloud-hosting-block" class="service-block">
                    <div class="service-header">
                        <label for="cloud-hosting-check">
                            <input type="checkbox" id="cloud-hosting-check" name="service" value="cloud-hosting">
                            <h3 class="text-lg font-semibold text-gray-800">Cloud Hosting <span class="text-xs font-medium text-sky-600 bg-sky-100 px-2 py-0.5 rounded-full ml-2">OPEX</span></h3>
                        </label>
                        <span class="calculated-cost font-bold text-lg text-gray-800">R 0</span>
                    </div>

                    <!-- CONFIGURATION BLOCK -->
                    <div id="cloud-hosting-config" class="config-block mt-4 space-y-3">
                        <!-- Option 1: Base Tier (Base Cost) -->
                        <div class="flex flex-col">
                            <label for="cloud-tier" class="text-sm font-medium text-gray-700 mb-1">Storage Tier</label>
                            <select id="cloud-tier" data-service-id="cloud-hosting" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                                <option value="500" data-price="500">Basic Tier (50GB included) (R 500/mo)</option>
                                <option value="1500" data-price="1500">Premium Tier (250GB included) (R 1,500/mo)</option>
                                <option value="3500" data-price="3500">Enterprise Tier (1TB included) (R 3,500/mo)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Selects the base monthly hosting fee (OPEX).</p>
                        </div>

                        <!-- Option 2: Extra Storage (Multiplier) -->
                        <div class="flex flex-col">
                            <label for="cloud-extra-storage" class="text-sm font-medium text-gray-700 mb-1">Extra Storage (GB)</label>
                            <input type="number" id="cloud-extra-storage" data-service-id="cloud-hosting" data-base-price="5" data-unit="GB" value="100" min="0" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                            <p class="text-xs text-gray-500 mt-1">R 5 per extra GB/month storage (OPEX).</p>
                        </div>
                    </div>
                </div>

                <!-- 4. Network Setup -->
                <div id="network-setup-block" class="service-block">
                    <div class="service-header">
                        <label for="network-setup-check">
                            <input type="checkbox" id="network-setup-check" name="service" value="network-setup">
                            <h3 class="text-lg font-semibold text-gray-800">Network Setup <span class="text-xs font-medium text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full ml-2">CAPEX</span></h3>
                        </label>
                        <span class="calculated-cost font-bold text-lg text-gray-800">R 0</span>
                    </div>

                    <!-- CONFIGURATION BLOCK -->
                    <div id="network-setup-config" class="config-block mt-4 space-y-3">
                        <!-- Option 1: Setup Complexity (Base Cost) -->
                        <div class="flex flex-col">
                            <label for="network-complexity" class="text-sm font-medium text-gray-700 mb-1">Setup Complexity</label>
                            <select id="network-complexity" data-service-id="network-setup" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                                <option value="7500" data-price="7500">Small Office (Max 10 devices) (R 7,500)</option>
                                <option value="25000" data-price="25000">Enterprise Solution (R 25,000)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Selects the base installation/consultation fee (CAPEX).</p>
                        </div>

                        <!-- Option 2: Extra Devices (Multiplier) -->
                        <div class="flex flex-col">
                            <label for="network-devices" class="text-sm font-medium text-gray-700 mb-1">Extra Devices (beyond base config)</label>
                            <input type="number" id="network-devices" data-service-id="network-setup" data-base-price="350" data-unit="device" value="5" min="0" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                            <p class="text-xs text-gray-500 mt-1">R 350 per extra device installation/configuration (CAPEX).</p>
                        </div>
                    </div>
                </div>
                
                <!-- 5. Data Analytics -->
                <div id="data-analytics-block" class="service-block">
                    <div class="service-header">
                        <label for="data-analytics-check">
                            <input type="checkbox" id="data-analytics-check" name="service" value="data-analytics">
                            <h3 class="text-lg font-semibold text-gray-800">Data Analytics <span class="text-xs font-medium text-sky-600 bg-sky-100 px-2 py-0.5 rounded-full ml-2">OPEX</span></h3>
                        </label>
                        <span class="calculated-cost font-bold text-lg text-gray-800">R 0</span>
                    </div>

                    <!-- CONFIGURATION BLOCK -->
                    <div id="data-analytics-config" class="config-block mt-4 space-y-3">
                        <!-- Option 1: Reporting Frequency (Base Price) -->
                        <div class="flex flex-col">
                            <label for="data-analytics-frequency" class="text-sm font-medium text-gray-700 mb-1">Reporting Frequency</label>
                            <select id="data-analytics-frequency" data-service-id="data-analytics" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                                <option value="4000" data-price="4000">Monthly Reporting (R 4,000/mo)</option>
                                <option value="10000" data-price="10000">Weekly Dashboard & Reporting (R 10,000/mo)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Selects the base monthly fee for reporting (OPEX).</p>
                        </div>

                        <!-- Option 2: Data Sources (Multiplier) -->
                        <div class="flex flex-col">
                            <label for="data-analytics-sources" class="text-sm font-medium text-gray-700 mb-1">Number of Data Sources to Integrate</label>
                            <input type="number" id="data-analytics-sources" data-service-id="data-analytics" data-base-price="1200" data-unit="source" value="2" min="1" class="p-2 border border-gray-300 rounded-md focus:ring-accent focus:border-accent transition duration-150">
                            <p class="text-xs text-gray-500 mt-1">R 1,200 per extra data source integrated (OPEX).</p>
                        </div>
                    </div>
                </div>

            </form>
        </div>

        <!-- Summary Panel -->
        <div class="summary">
            <div>
                <h2 class="text-xl">Your Estimate</h2>
                <p class="text-sm text-gray-600 mb-4">Summary of selected services and costs.</p>
                
                <div id="summary-details" class="space-y-2">
                    <!-- Dynamic summary items will go here -->
                </div>
            </div>

            <div class="summary-total">
                <p class="text-xl font-semibold mb-2">Estimated Total (Initial/Monthly)</p>
                <span id="total-cost">R 0</span>
                <p class="text-xs text-gray-600 mt-2">Prices are estimates and exclude VAT.</p>
                <button type="reset" form="calculation-form" class="btn-reset w-full mt-4">Reset Configuration</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================================
        // JAVASCRIPT LOGIC
        // ============================================================

        // Helper function to format currency
        const formatRands = (amount) => {
            return `R ${parseFloat(amount).toLocaleString('en-ZA', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
        };

        // Function to calculate the cost of a single service block based on its configured inputs
        const getServiceCost = (serviceId) => {
            let cost = 0;
            const configBlock = document.getElementById(`${serviceId}-config`);
            if (!configBlock) return 0;

            // 1. Get cost from the SELECT element (Base Price/Tier)
            const selectElement = configBlock.querySelector('select');
            if (selectElement) {
                // The value of the select is the base price
                cost += parseFloat(selectElement.value || 0);
            }

            // 2. Get cost from the NUMBER input element (Multiplier/Extra Cost)
            const numberElement = configBlock.querySelector('input[type="number"]');
            if (numberElement) {
                const quantity = parseFloat(numberElement.value) || 0;
                const basePrice = parseFloat(numberElement.getAttribute('data-base-price')) || 0;

                // Cost is base price * quantity
                cost += quantity * basePrice;
            }

            return cost;
        };
        
        // Main calculation function
        const calculateTotal = () => {
            let total = 0;
            const summaryDetails = document.getElementById('summary-details');
            summaryDetails.innerHTML = ''; // Clear previous summary

            // Get all checked services
            const activeServiceCheckboxes = document.querySelectorAll('input[name="service"]:checked');
            const activeServiceIds = Array.from(activeServiceCheckboxes).map(cb => cb.value);

            // Calculate total and build summary
            activeServiceIds.forEach(serviceId => {
                const serviceBlock = document.getElementById(`${serviceId}-block`);
                const serviceNameElement = serviceBlock.querySelector('h3');
                const serviceName = serviceNameElement ? serviceNameElement.textContent.split('CAPEX')[0].split('OPEX')[0].trim() : 'Service';
                
                // Get CAPEX/OPEX status for summary display
                const isCapex = serviceNameElement.querySelector('.text-orange-600');
                const costTypeLabel = isCapex ? 'CAPEX' : 'OPEX';

                const serviceCost = getServiceCost(serviceId);
                total += serviceCost;

                // Update the cost display span inside the service block
                const costDisplay = serviceBlock.querySelector('.calculated-cost');
                if (costDisplay) {
                    costDisplay.textContent = formatRands(serviceCost);
                }

                // Add item to the summary panel
                const summaryItem = document.createElement('div');
                summaryItem.className = 'flex justify-between items-start border-b border-gray-300 pb-1';
                summaryItem.innerHTML = `
                    <p class="text-sm font-medium text-gray-700">${serviceName}</p>
                    <div class="text-right">
                        <p class="text-sm font-semibold">${formatRands(serviceCost)}</p>
                        <span class="text-xs ${isCapex ? 'text-orange-600' : 'text-sky-600'}">(${costTypeLabel})</span>
                    </div>
                `;
                summaryDetails.appendChild(summaryItem);
            });

            // Update the grand total display
            document.getElementById('total-cost').textContent = formatRands(total);
        };

        // Function to toggle the visibility of the configuration block
        const handleServiceToggle = (event) => {
            const checkbox = event.target;
            const serviceId = checkbox.value;
            const configBlock = document.getElementById(`${serviceId}-config`);
            
            if (!configBlock) return;

            if (checkbox.checked) {
                configBlock.style.display = 'block';
            } else {
                configBlock.style.display = 'none';
                
                // Reset internal configuration to default when unchecked
                const selectElement = configBlock.querySelector('select');
                const numberElement = configBlock.querySelector('input[type="number"]');
                
                // Reset select to its first option (or the one marked as selected)
                if (selectElement) {
                    selectElement.selectedIndex = 0; 
                }
                
                // Reset number input to its default value (value attribute)
                if (numberElement) {
                    numberElement.value = numberElement.getAttribute('value') || 0;
                }
            }
            
            // Recalculate the total after toggling
            calculateTotal();
        };

        // Initialization Logic
        document.addEventListener('DOMContentLoaded', () => {
            const serviceCheckboxes = document.querySelectorAll('input[name="service"]');
            const calcForm = document.getElementById('calculation-form');
            const configBlocks = document.querySelectorAll('.config-block');

            // 1. Ensure all configuration blocks are hidden initially
            configBlocks.forEach(block => {
                block.style.display = 'none';
            });
            
            // 2. Add listener to all service selection checkboxes
            serviceCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', handleServiceToggle);
            });
            
            // 3. Add listener to all configuration inputs (Numbers, Selects)
            // Use a broader selector to catch all relevant inputs/selects on the form
            calcForm.querySelectorAll('input, select').forEach(input => {
                // Attach 'change' listener for selects and 'input' for number fields for real-time update
                const eventType = input.tagName === 'SELECT' ? 'change' : 'input';
                input.addEventListener(eventType, calculateTotal);
            });

            // 4. Handle form reset
            calcForm.addEventListener('reset', (event) => {
                event.preventDefault(); 
                
                // Manually uncheck/reset all controls and fire toggle event to hide config blocks
                serviceCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                         checkbox.checked = false; 
                         // Call toggle to hide config block and reset values
                         handleServiceToggle({ target: checkbox }); 
                    }
                });
                
                // Recalculate after reset
                calculateTotal(); 
            });

            // 5. Initial Calculation (Run once on load)
            calculateTotal();

        });
    </script>

</body>
</html>